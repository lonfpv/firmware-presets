#$ TITLE: LonFPV HappyModel Mobula7 40mm 2S settings
#$ FIRMWARE_VERSION: 4.3
#$ CATEGORY: OTHER
#$ STATUS: COMMUNITY
#$ KEYWORDS: 40mm, 2S, whoop, freestyle, defaults, reset, mode, modes, adjustments, aux, switch
#$ AUTHOR: LonFPV (Rich Blomseth)
#$ DESCRIPTION: BNF settings for a HappyModel Mobula7 40mm 2S whoop.

# -- Tune, filters, rates, and modes --
$ OPTION BEGIN: (CHECKED): HD Freestyle
#$ OPTION END
#$ OPTION BEGIN: (CHECKED): Dynamic Idle
#$ OPTION END
#$ INCLUDE: presets/4.3/tune/UAV_tech_Toothpic.txt
#$ INCLUDE: presets/4.3/filters/default_rpm_clean.txt
#$ INCLUDE: presets/4.3/rates/lonfpv_rates.txt
#$ INCLUDE: presets/4.3/modes/lonfpv_modes.txt

# -- LEDs, OSD, blackbox, and GPS --
#$ INCLUDE: presets/4.3/leds/lonfpv_led_disable.txt
#$ INCLUDE: presets/4.3/osd/lonfpv_dji_osd.txt
#$ INCLUDE: presets/4.3/other/lonfpv_blackbox_4k_pid_2k_log.txt
#$ INCLUDE: presets/4.3/other/lonfpv_gps_disable.txt

# -- RC link and VTX --
#$ INCLUDE: presets/4.3/rc_link/lonfpv_elrs_spi_250hz.txt

#$ OPTION BEGIN: (CHECKED): unlocked Freestyle
#$ OPTION END
#$ OPTION BEGIN: (CHECKED): use displayport on uart 2
#$ OPTION END
#$ INCLUDE: presets/4.3/vtx/lonfpv_hdzero_osd.txt

# -- LonFPV common settings --
#$ INCLUDE: presets/4.3/other/lonfpv_common.txt

# -- Manufacturer: HappyModel --
manufacturer_id HAMO

# -- DMA --
# ADC 1: DMA2 Stream 0 Channel 0
dma ADC 1 0
dma pin A09 NONE
dma pin A10 NONE

# -- Features --
feature -ANTI_GRAVITY

# -- Serial Ports --
serial 20 1 115200 57600 0 115200
serial 0 0 115200 57600 0 115200
serial 1 1 115200 57600 0 115200

# -- Master --
# from RC6
set crsf_use_negotiated_baud = OFF
set dshot_burst = OFF
set dshot_bidir = ON
set dshot_bitbang = AUTO
set motor_pwm_protocol = DSHOT300
set motor_poles = 12
set failsafe_delay = 4
set failsafe_recovery_delay = 20
set vbat_scale = 112
set ibata_scale = 285
set deadband = 1
set yaw_deadband = 1
set pid_process_denom = 4
set simplified_gyro_filter_multiplier = 120

set debug_mode = RX_EXPRESSLRS_SPI
set vtx_band = 1
set vtx_channel = 1
set vtx_power = 1
# invalid name: set max7456_clock = DEFAULT
set gyro_1_sensor_align = CW0FLIP
set gyro_1_align_pitch = 1800
set gyro_1_align_yaw = 0
